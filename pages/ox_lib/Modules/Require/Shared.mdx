import { Callout, FileTree } from 'nextra/components';

# Shared

_This module is always loaded by default._

## require

Loads the given module. The function starts by indexing the `loaded` table to determine whether `modname` is already loaded. If it is, then `require` returns the value stored at `loaded[modname]`.

- Module names are the path to a file relative to the resource.
- The module name must point to a `.lua` file.
- Use `.` to separate directories in a path.
- Modules can be loaded from external resources using `@resource.modname`.

```lua copy
require 'modname'
```

<Callout type="warning">

Client modules must be defined in the `file` section of the resource manifest.

```lua copy filename="fxmanifest.lua"
file 'modname.lua'
-- or
files {
  'modname.lua'
}
```

</Callout>



### Usage Example

<FileTree>
  <FileTree.Folder name="/resources/" defaultOpen>
    <FileTree.Folder name="/myLib/" defaultOpen>
      <FileTree.File name="import.lua" />
      <FileTree.Folder name="/data/" defaultOpen>
        <FileTree.File name="events.lua" />
      </FileTree.Folder>
    </FileTree.Folder>
    <FileTree.Folder name="/myResource/" defaultOpen>
      <FileTree.File name="server.lua" />
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>


```lua copy filename="mylib/import.lua"
local mylib = {
  events = require 'data.events'
}

print('Loaded mylib')

return mylib
```

```lua copy filename="mylib/data/events.lua"
return {
  disconnect = 'onPlayerDropped',
}
```

```lua copy filename="myresource/server.lua"
local mylib = require '@mylib.import'
print(mylib.events.disconnect)
```

## lib.load

Loads and runs a Lua file at the given path. Unlike require, the chunk is not cached for future use.

```lua copy
lib.load(filePath, env)
```

- filePath: `string`
  - A path to the Lua file, using the same rules as `require`.
- env?: `table`
  - A table to use as the global environment, defaulting to `_ENV`.

### Usage Example

```lua copy filename="myresource/import.lua"
local events = lib.load('data.events')

print('Loaded events')
```

```lua copy filename="myresource/data/events.lua"
return {
  disconnect = 'onPlayerDropped',
}
```

## lib.loadJson

Loads a JSON file at the given path and decodes it as a table.

```lua copy
lib.loadJson(filePath)
```

- filePath: `string`
  - A path to the Lua file, using the same rules as `require`.

### Usage Example

```lua copy filename="myresource/import.lua"
local events = lib.loadJson('data.events')

print('Loaded events')
```

```json filename="myresource/data/events.json"
{
  "disconnect": "onPlayerDropped"
}
```
